<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>提示词编写 SOP：从白皮书到可执行流程</title>
  <link rel="stylesheet" href="../assets/css/style.css">
  <style>
    .article-body h2 { font-size: 1.25rem; margin-top: 2rem; margin-bottom: 0.75rem; }
    .article-body h3 { font-size: 1.1rem; margin-top: 1.5rem; margin-bottom: 0.5rem; }
    .article-body p { margin: 0.75rem 0; }
    .article-body ul, .article-body ol { margin: 0.75rem 0; padding-left: 1.5rem; }
    .article-body li { margin: 0.25rem 0; }
    .article-body code { background: #f1f5f9; padding: 0.15em 0.4em; border-radius: 3px; font-size: 0.9em; }
    .article-body pre { background: #f1f5f9; padding: 1rem; border-radius: 6px; overflow-x: auto; font-size: 0.875rem; }
    .article-body pre code { background: none; padding: 0; }
    .article-body table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem; }
    .article-body th, .article-body td { border: 1px solid #e5e7eb; padding: 0.5rem 0.75rem; text-align: left; }
    .article-body th { background: #f8fafc; }
    .article-meta { font-size: 0.875rem; color: #6b7280; margin-bottom: 1.5rem; }
  </style>
</head>
<body>
  <main>
    <header>
      <nav aria-label="主导航">
        <a href="../index.html">首页</a>
        <a href="../prompts/index.html">提示词</a>
      </nav>
      <h1>提示词编写 SOP：从白皮书到可执行流程</h1>
      <p class="article-meta">基于 Google《Prompt Engineering》白皮书整理 · 技术博客</p>
    </header>

    <article class="article-body">
      <p>本文根据 <cite>resource/Prompt Engineering.pdf</cite>（Lee Boonstra 等，2025）整理出一套可复用的<strong>提示词编写标准作业流程（SOP）</strong>，便于在选模型、写提示、调参与文档化时按步骤执行，减少无效尝试并提高输出质量。</p>

      <h2>一、SOP 总览</h2>
      <p>提示工程是迭代过程：目标不清、配置不当或提示含糊都会导致输出模糊、偏离预期。建议按以下顺序执行：</p>
      <ol>
        <li>明确目标与输出形式</li>
        <li>选择模型并配置输出参数</li>
        <li>选择并应用提示技巧</li>
        <li>撰写提示（简洁、具体、多用示例）</li>
        <li>文档化与回归测试</li>
      </ol>

      <h2>二、明确目标与输出形式</h2>
      <p>在写提示前先确定：</p>
      <ul>
        <li><strong>任务类型</strong>：分类、抽取、摘要、生成、翻译、代码生成、推理等。</li>
        <li><strong>输出格式</strong>：纯文本、JSON、XML、固定标签（如 POSITIVE/NEGATIVE）、段落数量等。</li>
        <li><strong>长度与风格</strong>：是否需要「一句话」「一段话」「三条要点」等；语气是正式、口语还是技术文档。</li>
      </ul>
      <p>白皮书建议：<strong>多用「指令」说明要做什么，少用「约束」罗列不要做什么</strong>；对抽取、分类等任务可要求返回 JSON，以降低幻觉、便于解析。</p>

      <h2>三、选择模型并配置输出参数</h2>
      <p>不同模型和配置会显著影响结果。至少关注以下项：</p>

      <h3>3.1 输出长度（Token Limit）</h3>
      <p>限制生成 token 数可控制成本与延迟。注意：限制的是「何时停止生成」，不会自动让模型更简洁；若需要简短输出，需在提示中明确说明。</p>

      <h3>3.2 Temperature（温度）</h3>
      <ul>
        <li><strong>低（如 0～0.2）</strong>：更确定、一致，适合分类、抽取、有唯一答案的任务。</li>
        <li><strong>高（如 0.8～1）</strong>：更多样、创意，适合写作、头脑风暴。</li>
        <li><strong>数学/逻辑等单一正确答案</strong>：建议先用 <code>temperature=0</code>（贪婪解码）。</li>
      </ul>

      <h3>3.3 Top-K 与 Top-P</h3>
      <p>与 Temperature 一起控制采样范围：Top-K 取概率最高的 K 个 token，Top-P（核采样）按累积概率截断。一般起点可设为：</p>
      <ul>
        <li>偏确定：temperature≈0.1，top-P≈0.9，top-K≈20。</li>
        <li>偏创意：temperature≈0.9，top-P≈0.99，top-K≈40。</li>
      </ul>
      <p>若出现重复、车轱辘话（repetition loop），可适当调整 temperature 与 top-K/top-P 的平衡。</p>

      <h2>四、选择并应用提示技巧</h2>
      <p>按任务复杂度与是否需要「推理」来选技巧：</p>

      <table>
        <thead>
          <tr><th>技巧</th><th>适用场景</th></tr>
        </thead>
        <tbody>
          <tr><td>Zero-shot</td><td>任务简单、模型已能理解，只给任务描述与输入</td></tr>
          <tr><td>One-shot / Few-shot</td><td>需要固定输出格式或模式；一般 3～5 个示例，分类任务需混合不同类别</td></tr>
          <tr><td>System / Role / Context</td><td>System 定整体能力与目的；Role 定身份与口吻；Context 提供当前任务相关背景</td></tr>
          <tr><td>Step-back</td><td>先让模型回答一个更抽象、原则性问题，再把答案作为上下文回答具体问题</td></tr>
          <tr><td>Chain of Thought (CoT)</td><td>需要推理、数学、多步决策；加「Let's think step by step」或给 1～2 个带推理过程的示例</td></tr>
          <tr><td>Self-consistency</td><td>同一提示多次采样，取多数答案以提高正确率（代价为成本与延迟）</td></tr>
          <tr><td>ReAct</td><td>需要调用工具、搜索、API 的智能体式任务</td></tr>
        </tbody>
      </table>

      <p>CoT 使用建议：将<strong>最终答案放在推理步骤之后</strong>；若只关心最终答案，temperature 设为 0；在工程上需能从输出中稳定解析出「推理」与「答案」两部分。</p>

      <h2>五、撰写提示的通用原则</h2>
      <ul>
        <li><strong>简洁清晰</strong>：自己都绕的表述，模型更难用好；多用动词（Act, Classify, Extract, Summarize, Translate 等）明确动作。</li>
        <li><strong>具体说明输出</strong>：例如「生成 3 段、每段 2～3 句的博客」「仅返回 POSITIVE/NEUTRAL/NEGATIVE」。</li>
        <li><strong>多用示例</strong>：One-shot / Few-shot 对格式、风格、边界情况最有效；示例需高质量、无错误。</li>
        <li><strong>变量化</strong>：将城市、产品、日期等抽成变量（如 <code>{city}</code>），便于在应用内复用同一提示模板。</li>
        <li><strong>结构化输出</strong>：抽取、分类、解析类任务可要求 JSON/XML 并给出 schema，有利于减少幻觉、便于下游处理。</li>
      </ul>

      <h2>六、文档与迭代</h2>
      <p>白皮书强调：提示会经历多轮修改，且不同模型、版本、采样设置下表现可能差异很大，因此需要<strong>系统化记录每次尝试</strong>。推荐用表格记录至少以下字段：</p>

      <table>
        <thead>
          <tr><th>字段</th><th>说明</th></tr>
        </thead>
        <tbody>
          <tr><td>Name / Version</td><td>提示名称与版本号</td></tr>
          <tr><td>Goal</td><td>一句话描述本次尝试的目标</td></tr>
          <tr><td>Model</td><td>模型名称与版本</td></tr>
          <tr><td>Temperature / Top-K / Top-P / Token Limit</td><td>所用配置</td></tr>
          <tr><td>Prompt</td><td>完整提示内容</td></tr>
          <tr><td>Output</td><td>代表性输出或多次输出的摘要</td></tr>
          <tr><td>Result</td><td>OK / NOT OK / SOMETIMES OK</td></tr>
          <tr><td>Feedback</td><td>备注、待改进点</td></tr>
        </tbody>
      </table>

      <p>在代码中：将提示与业务逻辑分离（如独立配置文件或模块），便于维护；对关键提示做自动化测试与回归，以观察模型或配置变更后的表现。</p>

      <h2>小结</h2>
      <p>一套可执行的提示词编写 SOP 可归纳为：<strong>先定目标与输出形式 → 选模型与调参 → 选提示技巧 → 按「简洁、具体、示例、变量、结构化」原则撰写 → 文档化并迭代测试</strong>。白皮书中关于 LLM 输出配置、各类提示技巧与代码场景（写代码、解释、翻译、调试）的细节，可作为本 SOP 的延伸阅读，按任务类型进一步细化。</p>

      <p><small>参考：<cite>Prompt Engineering</cite> (February 2025), Lee Boonstra et al., Google. 见本站 <code>resource/Prompt Engineering.pdf</code>。</small></p>
    </article>

    <footer>
      <p><a href="../index.html">首页</a> · <a href="../prompts/index.html">提示词</a> · 静态网站 · 由 dvdface.github.io 托管</p>
    </footer>
  </main>
  <script src="../assets/js/main.js"></script>
</body>
</html>
